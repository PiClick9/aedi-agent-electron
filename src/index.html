<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.aedi.ai; style-src 'self' 'unsafe-inline' https://*.aedi.ai; img-src * data: blob:; connect-src *; frame-src *;">
  <title>AEDI Agent</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- ìƒë‹¨ URL ë°” -->
  <div class="toolbar">
    <div class="url-bar">
      <button id="btn-back" class="nav-btn" title="ë’¤ë¡œ">â†</button>
      <button id="btn-forward" class="nav-btn" title="ì•ìœ¼ë¡œ">â†’</button>
      <button id="btn-reload" class="nav-btn" title="ìƒˆë¡œê³ ì¹¨">â†»</button>
      <input type="text" id="url-input" placeholder="URLì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: https://example.com)">
      <button id="btn-go" class="primary-btn">ì´ë™</button>
    </div>
    <div class="toolbar-actions">
      <button id="btn-devtools" class="action-btn" title="ê°œë°œì ë„êµ¬">ğŸ”§</button>
      <button id="btn-inject" class="action-btn primary" title="ì—ì´ì „íŠ¸ ì£¼ì…">ğŸ¤– Agent</button>
    </div>
  </div>

  <!-- ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ -->
  <div class="main-container">
    <!-- ì›¹ë·° ì˜ì—­ -->
    <div class="webview-container">
      <webview id="webview" src="about:blank" webpreferences="contextIsolation=no, nodeIntegration=no" allowpopups></webview>
      <div id="loading-overlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <span>Loading...</span>
      </div>
    </div>

    <!-- ì—ì´ì „íŠ¸ íŒ¨ë„ (ì˜¤ë¥¸ìª½ ì‚¬ì´ë“œë°”) -->
    <div id="agent-panel" class="agent-panel">
      <div class="panel-header">
        <h2>ğŸ¤– AEDI Agent <span class="version">v1.0.0</span></h2>
        <button id="btn-close-panel" class="close-btn">Ã—</button>
      </div>

      <div class="panel-content">
        <!-- êµ­ê°€ ì„ íƒ -->
        <div class="form-group">
          <label>Nation / êµ­ê°€</label>
          <div class="radio-group">
            <label class="radio-label">
              <input type="radio" name="nation" value="kr" checked>
              ğŸ‡°ğŸ‡· í•œêµ­ (Korea)
            </label>
            <label class="radio-label">
              <input type="radio" name="nation" value="th">
              ğŸ‡¹ğŸ‡­ íƒœêµ­ (Thailand)
            </label>
          </div>
        </div>

        <!-- API Key -->
        <div class="form-group">
          <label>API Key</label>
          <input type="text" id="api-key" readonly class="highlight-input">
        </div>

        <!-- ì´ë¯¸ì§€ ì„ íƒ -->
        <div class="form-group">
          <label>Image Selector</label>
          <div class="input-with-btn">
            <input type="text" id="img-selector" placeholder="ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”" readonly>
            <button id="btn-select-images" class="icon-btn">ğŸ¯</button>
            <button id="btn-clear-images" class="icon-btn danger">ğŸ—‘</button>
          </div>
          <div class="helper-text" id="selected-count">ì„ íƒëœ ì´ë¯¸ì§€ ì—†ìŒ</div>
        </div>

        <!-- ë‚ ì§œ -->
        <div class="form-group">
          <label>Date (Auto-generated, ISO 8601)</label>
          <input type="text" id="date-value" readonly class="success-input">
        </div>

        <!-- ì˜µì…˜ -->
        <div class="form-group">
          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" id="debug-mode" checked>
              Debug Mode
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="auto-start">
              Auto Start
            </label>
          </div>
        </div>

        <!-- ë©”ì¸ ë²„íŠ¼ë“¤ -->
        <div class="btn-grid">
          <button id="btn-save" class="btn primary">ğŸ’¾ Save</button>
          <button id="btn-start" class="btn">â–¶ Start</button>
          <button id="btn-stop" class="btn danger">â¹ Stop</button>
          <button id="btn-restart" class="btn">ğŸ”„ Restart</button>
        </div>

        <!-- ì¶”ê°€ ë„êµ¬ -->
        <div class="form-group" style="margin-top: 8px;">
          <label>P-Box Viewer</label>
          <div class="input-with-btn">
            <select id="ad-select" class="ad-select">
              <option value="">ê´‘ê³ ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
            </select>
            <button id="btn-pbox" class="icon-btn primary">ğŸ“¦</button>
          </div>
        </div>
        <div class="btn-grid">
          <button id="btn-abf" class="btn" style="grid-column: span 4;">ğŸ¨ ABF Editor</button>
        </div>

        <!-- í†µê³„ -->
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-value" id="stat-ads">0</div>
            <div class="stat-label">Ads</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="stat-intervals">0</div>
            <div class="stat-label">Intervals</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="stat-aedi">âœ—</div>
            <div class="stat-label">AEDI</div>
          </div>
        </div>

        <!-- ìƒíƒœ -->
        <div class="status-bar" id="status-bar">
          <div class="status-dot"></div>
          <span id="status-text">Ready</span>
        </div>

        <!-- ìº¡ì²˜ëœ ê´‘ê³  ëª©ë¡ -->
        <div class="form-group" style="margin-top: 15px;">
          <label>Captured Ads</label>
          <div id="ad-list" class="ad-list">
            <div class="ad-list-empty">ê´‘ê³  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
